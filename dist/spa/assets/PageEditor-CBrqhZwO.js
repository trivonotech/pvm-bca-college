import{f as j,z as v,a as y,u as N,r as o,j as e,A as w,B as k,L as I,S,I as L,d as x,b as g,g as C,s as B,m as D,c as E}from"./index-1JA6dDZo.js";const P=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],M=j("link",P);function A(){const{pageId:t}=v(),u=y(),{toast:i}=N(),[p,h]=o.useState(!0),[d,m]=o.useState(!1),[a,r]=o.useState({title:"",content:"",metaDescription:"",heroImage:""});o.useEffect(()=>{if(!t)return;(async()=>{const l=x(g,"pages",t),n=await C(l);n.exists()?r(n.data()):r(c=>({...c,title:t?.toUpperCase()||""})),h(!1)})()},[t]);const b=async()=>{if(t){m(!0);try{await B(x(g,"pages",t),{...a,updatedAt:D(),updatedBy:"admin"},{merge:!0}),i({title:"Success",description:"Page saved successfully!",className:"bg-green-500 text-white border-none",duration:3e3})}catch{i({title:"Error",description:"Failed to save.",variant:"destructive",duration:3e3})}finally{m(!1)}}},f=async s=>{const l=s.target.files?.[0];if(l)try{const n=await E(l);r(c=>({...c,heroImage:n}))}catch{i({title:"Error",description:"Image upload failed",variant:"destructive",duration:3e3})}};return p?e.jsx("div",{className:"p-12 text-center",children:"Loading editor..."}):e.jsx(w,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-4 z-10 bg-white/80 p-4 rounded-xl shadow-sm backdrop-blur-md border border-gray-100",children:[e.jsxs("button",{onClick:()=>u("/admin/pages"),className:"flex items-center gap-2 text-gray-500 hover:text-gray-900",children:[e.jsx(k,{className:"w-4 h-4"})," Back"]}),e.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 bg-green-600 text-white px-6 py-2 rounded-xl hover:bg-green-700 transition disabled:opacity-50",children:[d?e.jsx(I,{className:"w-4 h-4 animate-spin"}):e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Page Title"}),e.jsx("input",{type:"text",value:a.title,onChange:s=>r({...a,title:s.target.value}),className:"w-full p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Slug/URL"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 bg-gray-50 p-3 rounded-xl border",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["/",t]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Page Banner / Hero Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[a.heroImage&&e.jsx("img",{src:a.heroImage,className:"w-24 h-24 object-cover rounded-lg border",alt:"Banner"}),e.jsxs("label",{className:"cursor-pointer bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 transition flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Image"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:f})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Content Body (HTML Supported)"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"You can type plain text or paste HTML here."}),e.jsx("textarea",{rows:15,value:a.content,onChange:s=>r({...a,content:s.target.value}),className:"w-full p-4 border rounded-xl font-mono text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"<p>Write your page content here...</p>"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"SEO Meta Description"}),e.jsx("textarea",{rows:2,value:a.metaDescription,onChange:s=>r({...a,metaDescription:s.target.value}),className:"w-full p-3 border rounded-xl text-sm",placeholder:"Brief summary for Google search results..."})]})]})]})})}export{A as default};
