import{f as P,u as O,r as t,h as _,q as B,o as R,i as X,j as e,A as $,e as z,k as G,v as H,w as J,U as K,x as Q,T as V,M as Y,X as Z,y as ee,C as se,b as p,t as te,d as k,c as ae,n as le,m as g,p as re}from"./index-1JA6dDZo.js";const oe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],de=P("mic",oe);function ce(){const{toast:o}=O(),[C,S]=t.useState([]),[ne,b]=t.useState(!0),[x,D]=t.useState(""),[u,f]=t.useState(!1),[E,d]=t.useState(!1),[n,y]=t.useState(null),[j,c]=t.useState(""),[I,h]=t.useState(!1),[v,M]=t.useState(null),[a,r]=t.useState({title:"",date:"",speaker:"",image:""}),w=_(p,"workshops");t.useEffect(()=>{const s=B(w,R("date","desc")),l=X(s,i=>{const m=i.docs.map(N=>({id:N.id,...N.data()}));S(m),b(!1)},()=>{b(!1)});return()=>l()},[]);const T=()=>{y(null),r({title:"",date:"",speaker:"",image:""}),c(""),d(!0)},W=s=>{y(s),r({title:s.title,date:s.date,speaker:s.speaker,image:s.image||""}),c(s.image||""),d(!0)},A=s=>{M(s),h(!0)},U=async()=>{if(v)try{await te(k(p,"workshops",v)),o({title:"Deleted",description:"Workshop deleted successfully."}),h(!1)}catch{o({title:"Error",description:"Failed to delete workshop.",variant:"destructive"})}},L=async s=>{const l=s.target.files?.[0];if(l)try{const i=await ae(l);c(i),r(m=>({...m,image:i}))}catch{o({title:"Error",description:"Failed to process image",variant:"destructive"})}},q=async s=>{s.preventDefault(),f(!0);try{n?(await le(k(p,"workshops",n.id),{...a,updatedAt:g()}),o({title:"Updated",description:"Workshop updated successfully."})):(await re(w,{...a,createdAt:g(),updatedAt:g()}),o({title:"Created",description:"Workshop created successfully."})),d(!1)}catch{o({title:"Error",description:"Failed to save workshop.",variant:"destructive"})}finally{f(!1)}},F=C.filter(s=>s.title.toLowerCase().includes(x.toLowerCase())||s.speaker.toLowerCase().includes(x.toLowerCase()));return e.jsxs($,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Workshops Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage technical workshops and seminars"})]}),e.jsxs("button",{onClick:T,className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg",children:[e.jsx(z,{className:"w-5 h-5"}),"Add New Workshop"]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search workshops...",value:x,onChange:s=>D(s.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(s=>{const l=H(s.date);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[s.image?e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsx(de,{className:"w-12 h-12"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${l==="Upcoming"?"bg-yellow-400 text-black":"bg-gray-200 text-gray-600"}`,children:l})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:s.title}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[e.jsx(J,{className:"w-4 h-4"}),s.date]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[e.jsx(K,{className:"w-4 h-4"}),s.speaker]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>W(s),className:"flex-1 bg-blue-50 text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-100 flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"})," Edit"]}),e.jsxs("button",{onClick:()=>A(s.id),className:"flex-1 bg-red-50 text-red-600 px-4 py-2 rounded-lg font-medium hover:bg-red-100 flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"})," Delete"]})]})]})]},s.id)})})]}),e.jsx(Y,{isOpen:E,onClose:()=>d(!1),title:n?"Edit Workshop":"Add Workshop",children:e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:a.title,onChange:s=>r({...a,title:s.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none",placeholder:"e.g. AI Seminar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:a.date,onChange:s=>r({...a,date:s.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Speaker"}),e.jsx("input",{type:"text",value:a.speaker,onChange:s=>r({...a,speaker:s.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 outline-none",placeholder:"e.g. Dr. Sharma"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 text-center",children:j?e.jsxs("div",{className:"relative w-fit mx-auto",children:[e.jsx("img",{src:j,className:"h-32 object-contain"}),e.jsx("button",{type:"button",onClick:()=>{c(""),r({...a,image:""})},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(Z,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx(ee,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:L,className:"hidden"})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),disabled:u,className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-700 disabled:opacity-50",children:u?n?"Updating...":"Creating...":n?"Update":"Create"})]})]})}),e.jsx(se,{isOpen:I,onClose:()=>h(!1),onConfirm:U,title:"Delete Workshop",message:"Are you sure you want to delete this workshop? This action cannot be undone.",confirmText:"Delete",type:"danger"})]})}export{ce as default};
