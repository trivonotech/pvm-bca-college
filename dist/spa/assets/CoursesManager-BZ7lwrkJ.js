import{f as F,u as z,r as c,q as P,o as H,h as A,i as R,j as e,A as G,k as K,e as w,G as U,T as C,X as k,I as X,C as Y,c as $,m as E,n as J,d as M,b as v,p as Q,t as V}from"./index-1JA6dDZo.js";const W=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Z=F("pencil",W),N=({label:o,items:d,onChange:p,placeholder:h})=>{const[m,u]=c.useState(""),g=()=>{m.trim()&&(p([...d,m.trim()]),u(""))},n=l=>{p(d.filter((r,i)=>i!==l))};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:o}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:l=>u(l.target.value),onKeyDown:l=>l.key==="Enter"&&(l.preventDefault(),g()),className:"flex-1 p-2 border rounded-lg",placeholder:h}),e.jsx("button",{type:"button",onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add"})]}),e.jsx("ul",{className:"space-y-2",children:d.map((l,r)=>e.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-700",children:l}),e.jsx("button",{type:"button",onClick:()=>n(r),className:"text-red-500 hover:text-red-700",children:e.jsx(k,{className:"w-4 h-4"})})]},r))})]})},I=({syllabus:o,onChange:d})=>{const p=()=>{const l=o.length+1;d([...o,{id:l,sem:`Semester ${l}`,courses:[]}])},h=l=>{d(o.filter((r,i)=>i!==l))},m=(l,r)=>{const i=[...o];i[l].sem=r,d(i)},u=l=>{const r=[...o],i=r[l].courses.length+1;r[l].courses.push({srNo:i.toString(),category:"Major",title:"",level:"4.5",credit:"4",teachingHrs:"60",seeMarks:"50",cceMarks:"50",totalMarks:"100",duration:"2:30 Hrs"}),d(r)},g=(l,r)=>{const i=[...o];i[l].courses=i[l].courses.filter((s,a)=>a!==r),d(i)},n=(l,r,i,s)=>{const a=[...o];a[l].courses[r]={...a[l].courses[r],[i]:s},d(a)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Syllabus Configuration"}),e.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-2 bg-[#0B0B3B] text-white px-4 py-2 rounded-lg hover:bg-[#1a1a5e]",children:[e.jsx(w,{className:"w-4 h-4"})," Add Semester"]})]}),o.map((l,r)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white",children:[e.jsxs("div",{className:"bg-gray-50 p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("input",{type:"text",value:l.sem,onChange:i=>m(r,i.target.value),className:"font-bold text-gray-800 bg-transparent border-none focus:ring-0 text-lg"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:()=>h(r),className:"text-red-500 p-2 hover:bg-red-50 rounded-full",children:e.jsx(C,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"p-4 overflow-x-auto no-scrollbar",children:[e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-[50px_100px_2fr_50px_50px_80px_60px_60px_60px_80px_40px] gap-2 font-bold text-xs text-gray-500 uppercase mb-2 px-2",children:[e.jsx("div",{children:"Sr"}),e.jsx("div",{children:"Cat"}),e.jsx("div",{children:"Title"}),e.jsx("div",{children:"Lvl"}),e.jsx("div",{children:"Cr"}),e.jsx("div",{children:"Hrs"}),e.jsx("div",{children:"SEE"}),e.jsx("div",{children:"CCE"}),e.jsx("div",{children:"Tot"}),e.jsx("div",{children:"Dur"}),e.jsx("div",{})]}),e.jsx("div",{className:"space-y-2",children:l.courses.map((i,s)=>e.jsxs("div",{className:"grid grid-cols-[50px_100px_2fr_50px_50px_80px_60px_60px_60px_80px_40px] gap-2 items-center bg-gray-50/50 p-2 rounded-lg hover:bg-gray-100 transition",children:[e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.srNo,onChange:a=>n(r,s,"srNo",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.category,onChange:a=>n(r,s,"category",a.target.value)}),e.jsx("textarea",{rows:1,className:"w-full text-xs p-1 border rounded resize-none",value:i.title,onChange:a=>n(r,s,"title",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.level,onChange:a=>n(r,s,"level",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.credit,onChange:a=>n(r,s,"credit",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.teachingHrs,onChange:a=>n(r,s,"teachingHrs",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.seeMarks,onChange:a=>n(r,s,"seeMarks",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.cceMarks,onChange:a=>n(r,s,"cceMarks",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.totalMarks,onChange:a=>n(r,s,"totalMarks",a.target.value)}),e.jsx("input",{type:"text",className:"w-full text-xs p-1 border rounded",value:i.duration,onChange:a=>n(r,s,"duration",a.target.value)}),e.jsx("button",{type:"button",onClick:()=>g(r,s),className:"text-red-400 hover:text-red-600",children:e.jsx(k,{className:"w-4 h-4"})})]},s))})]}),e.jsxs("button",{type:"button",onClick:()=>u(r),className:"mt-4 text-sm text-blue-600 font-medium hover:underline flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"})," Add Subject"]})]})]},l.id)),o.length===0&&e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-gray-400",children:'No semesters added. Click "Add Semester" to begin.'})]})};function te(){const{toast:o}=z(),[d,p]=c.useState([]),[h,m]=c.useState(!0),[u,g]=c.useState(""),[n,l]=c.useState(!1),[r,i]=c.useState(null),[s,a]=c.useState({name:"",code:"",duration:"",eligibility:"",seats:60,fees:"",description:"",image:"",objectives:[],careerOpportunities:[],syllabus:[],eligibilityDetails:[]}),[f,j]=c.useState(null),S=c.useRef(null);c.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),c.useEffect(()=>{const t=P(A(v,"courses"),H("createdAt","desc")),x=R(t,b=>{const y=b.docs.map(B=>({id:B.id,...B.data()}));p(y),m(!1)});return()=>x()},[]);const q=async t=>{const x=t.target.files?.[0];if(x)try{const b=await $(x);a(y=>({...y,image:b}))}catch{o({title:"Error",description:"Failed to upload image.",variant:"destructive"})}},L=async t=>{t.preventDefault();try{const x={...s,updatedAt:E()};r?await J(M(v,"courses",r.id),x):await Q(A(v,"courses"),{...x,createdAt:E()}),l(!1),i(null),_(),o({title:"Success",description:"Course saved successfully!",className:"bg-green-500 text-white border-none"})}catch{o({title:"Error",description:"Failed to save course.",variant:"destructive"})}},_=()=>{a({name:"",code:"",duration:"",eligibility:"",seats:60,fees:"",description:"",image:"",objectives:[],careerOpportunities:[],syllabus:[],eligibilityDetails:[]})},O=async()=>{if(f)try{await V(M(v,"courses",f)),j(null)}catch{o({title:"Error",description:"Failed to delete course.",variant:"destructive"})}},T=t=>{i(t),a({...t,objectives:t.objectives||[],careerOpportunities:t.careerOpportunities||[],syllabus:t.syllabus||[],eligibilityDetails:t.eligibilityDetails||[]}),l(!0)},D=d.filter(t=>t.name.toLowerCase().includes(u.toLowerCase())||t.code.toLowerCase().includes(u.toLowerCase()));return e.jsxs(G,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:u,onChange:t=>g(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>{i(null),_(),l(!0)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-700 transition",children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Course"})]})]}),h?e.jsx("div",{className:"text-center py-12",children:"Loading courses..."}):D.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No courses found. Add one to get started."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden group hover:shadow-md transition",children:[e.jsxs("div",{className:"h-40 bg-gray-100 relative overflow-hidden",children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(U,{className:"w-12 h-12"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center gap-3 opacity-0 group-hover:opacity-100 transition duration-200",children:[e.jsx("button",{onClick:()=>T(t),className:"p-2 bg-white/20 hover:bg-white/40 rounded-full text-white backdrop-blur-sm",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>j(t.id),className:"p-2 bg-red-500/20 hover:bg-red-500/40 rounded-full text-white backdrop-blur-sm",children:e.jsx(C,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 line-clamp-1",children:t.name}),e.jsx("span",{className:"text-xs font-bold bg-blue-50 text-blue-600 px-2 py-1 rounded-full uppercase whitespace-nowrap shrink-0",children:t.code})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[e.jsx("span",{children:t.duration}),e.jsxs("span",{children:[t.seats," Seats"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:t.description})]})]},t.id))}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Course":"Create New Course"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage course details, curriculum, and metadata."})]}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-200 rounded-full transition",children:e.jsx(k,{className:"w-6 h-6 text-gray-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 no-scrollbar",children:e.jsxs("form",{id:"course-form",onSubmit:L,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0B0B3B] border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"flex gap-6 items-start",children:[e.jsxs("div",{className:"w-48 shrink-0",children:[e.jsx("div",{onClick:()=>S.current?.click(),className:"w-full h-48 bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:bg-gray-100 transition overflow-hidden",children:s.image?e.jsxs("div",{className:"relative w-full h-full group",children:[e.jsx("img",{src:s.image,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),a({...s,image:""})},className:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600",title:"Remove Image",children:e.jsx(C,{className:"w-5 h-5"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 text-center px-2",children:"Click to upload Image"})]})}),e.jsx("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:q})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Name"}),e.jsx("input",{required:!0,type:"text",value:s.name,onChange:t=>a({...s,name:t.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"e.g. Bachelor of Computer Applications"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Code"}),e.jsx("input",{required:!0,type:"text",value:s.code,onChange:t=>a({...s,code:t.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"e.g. BCA"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),e.jsx("input",{required:!0,type:"text",value:s.duration,onChange:t=>a({...s,duration:t.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"e.g. 3 Years"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Seats"}),e.jsx("input",{required:!0,type:"number",value:s.seats,onChange:t=>a({...s,seats:parseInt(t.target.value)}),className:"w-full p-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fees"}),e.jsx("input",{required:!0,type:"text",value:s.fees,onChange:t=>a({...s,fees:t.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"e.g. â‚¹25,000 / Sem"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),e.jsx("textarea",{required:!0,rows:3,value:s.description,onChange:t=>a({...s,description:t.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"Brief overview..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Eligibility (Short)"}),e.jsx("input",{required:!0,type:"text",value:s.eligibility,onChange:t=>a({...s,eligibility:t.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"e.g. 12th Pass"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0B0B3B] border-b pb-2",children:"Course Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsx(N,{label:"Course Objectives",placeholder:"Add an objective...",items:s.objectives||[],onChange:t=>a({...s,objectives:t})}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(N,{label:"Career Opportunities",placeholder:"Add a career role...",items:s.careerOpportunities||[],onChange:t=>a({...s,careerOpportunities:t})}),e.jsx(N,{label:"Eligibility Criteria (Detailed)",placeholder:"Add requirement...",items:s.eligibilityDetails||[],onChange:t=>a({...s,eligibilityDetails:t})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-[#0B0B3B] border-b pb-2",children:"Academic Curriculum"}),e.jsx(I,{syllabus:s.syllabus||[],onChange:t=>a({...s,syllabus:t})})]})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50/50 flex justify-end gap-3 z-10",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-6 py-2 rounded-xl text-gray-700 font-bold hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{type:"submit",form:"course-form",className:"px-6 py-2 rounded-xl bg-[#0B0B3B] text-white font-bold hover:bg-[#1a1a5e] transition shadow-lg shadow-blue-900/20",children:r?"Save Changes":"Create Course"})]})]})}),e.jsx(Y,{isOpen:!!f,onClose:()=>j(null),onConfirm:O,title:"Delete Course",message:"Are you sure you want to delete this course? This cannot be undone."})]})}export{te as default};
